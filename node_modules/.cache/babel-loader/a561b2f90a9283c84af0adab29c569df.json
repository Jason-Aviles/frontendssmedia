{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useRef,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useNavigate,useParams}from\"react-router-dom\";import CreatePost from\"../../components/createPost\";import Header from\"../../components/header\";import LeftHome from\"../../components/home/left\";import RightHome from\"../../components/home/right\";import Stories from\"../../components/home/stories\";import ActivateForm from\"./ActivateForm\";import\"./style.css\";import axios from\"axios\";import Cookies from\"js-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Activate(){var dispatch=useDispatch();var navigate=useNavigate();var _useSelector=useSelector(function(user){return _objectSpread({},user);}),user=_useSelector.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useParams=useParams(),token=_useParams.token;useEffect(function(){activateAccount();},[]);var activateAccount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/activate\"),{token:token},{headers:{Authorization:\"Bearer \".concat(user.token)}});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setSuccess(data.message);Cookies.set(\"user\",JSON.stringify(_objectSpread(_objectSpread({},user),{},{verified:true})));dispatch({type:\"VERIFY\",payload:true});setTimeout(function(){navigate(\"/\");},3000);_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(_context.t0.response.data.message);setTimeout(function(){navigate(\"/\");},3000);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function activateAccount(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[success&&/*#__PURE__*/_jsx(ActivateForm,{type:\"success\",header:\"Account verification succeded.\",text:success,loading:loading}),error&&/*#__PURE__*/_jsx(ActivateForm,{type:\"error\",header:\"Account verification failed.\",text:error,loading:loading}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(LeftHome,{user:user}),/*#__PURE__*/_jsxs(\"div\",{className:\"home_middle\",children:[/*#__PURE__*/_jsx(Stories,{}),/*#__PURE__*/_jsx(CreatePost,{user:user})]}),/*#__PURE__*/_jsx(RightHome,{user:user})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/pages/home/activate.js"],"names":["useEffect","useRef","useState","useDispatch","useSelector","useNavigate","useParams","CreatePost","Header","LeftHome","RightHome","Stories","ActivateForm","axios","Cookies","Activate","dispatch","navigate","user","success","setSuccess","error","setError","loading","setLoading","token","activateAccount","post","process","env","REACT_APP_BACKEND_URL","headers","Authorization","data","message","set","JSON","stringify","verified","type","payload","setTimeout","response"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport CreatePost from \"../../components/createPost\";\r\nimport Header from \"../../components/header\";\r\nimport LeftHome from \"../../components/home/left\";\r\nimport RightHome from \"../../components/home/right\";\r\nimport Stories from \"../../components/home/stories\";\r\nimport ActivateForm from \"./ActivateForm\";\r\nimport \"./style.css\";\r\nimport axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nexport default function Activate() {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((user) => ({ ...user }));\r\n  const [success, setSuccess] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const { token } = useParams();\r\n  useEffect(() => {\r\n    activateAccount();\r\n  }, []);\r\n  const activateAccount = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await axios.post(\r\n        `${process.env.REACT_APP_BACKEND_URL}/activate`,\r\n        { token },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        }\r\n      );\r\n      setSuccess(data.message);\r\n      Cookies.set(\"user\", JSON.stringify({ ...user, verified: true }));\r\n      dispatch({\r\n        type: \"VERIFY\",\r\n        payload: true,\r\n      });\r\n\r\n      setTimeout(() => {\r\n        navigate(\"/\");\r\n      }, 3000);\r\n    } catch (error) {\r\n      setError(error.response.data.message);\r\n      setTimeout(() => {\r\n        navigate(\"/\");\r\n      }, 3000);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"home\">\r\n      {success && (\r\n        <ActivateForm\r\n          type=\"success\"\r\n          header=\"Account verification succeded.\"\r\n          text={success}\r\n          loading={loading}\r\n        />\r\n      )}\r\n      {error && (\r\n        <ActivateForm\r\n          type=\"error\"\r\n          header=\"Account verification failed.\"\r\n          text={error}\r\n          loading={loading}\r\n        />\r\n      )}\r\n      <Header />\r\n      <LeftHome user={user} />\r\n      <div className=\"home_middle\">\r\n        <Stories />\r\n        <CreatePost user={user} />\r\n      </div>\r\n      <RightHome user={user} />\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}