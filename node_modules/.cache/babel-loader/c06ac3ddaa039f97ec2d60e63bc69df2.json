{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{Formik,Form}from\"formik\";import{Link}from\"react-router-dom\";import*as Yup from\"yup\";import LoginInput from\"../../components/inputs/loginInput\";import{useState}from\"react\";import DotLoader from\"react-spinners/DotLoader\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import Cookies from\"js-cookie\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginInfos={email:\"\",password:\"\"};export default function LoginForm(_ref){var setVisible=_ref.setVisible;var dispatch=useDispatch();var navigate=useNavigate();var _useState=useState(loginInfos),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setLogin=_useState2[1];var email=login.email,password=login.password;var handleLoginChange=function handleLoginChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setLogin(_objectSpread(_objectSpread({},login),{},_defineProperty({},name,value)));};var loginValidation=Yup.object({email:Yup.string().required(\"Email address is required.\").email(\"Must be a valid email.\").max(100),password:Yup.string().required(\"Password is required\")});var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var loginSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/login\"),{email:email,password:password});case 4:_yield$axios$post=_context.sent;data=_yield$axios$post.data;dispatch({type:\"LOGIN\",payload:data});Cookies.set(\"user\",JSON.stringify(data));navigate(\"/\");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);setLoading(false);setError(_context.t0.response.data.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function loginSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login_wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login_1\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"../../icons/facebook.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Facebook helps you connect and share with the people in your life.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login_2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login_2_wrap\",children:[/*#__PURE__*/_jsx(Formik,{enableReinitialize:true,initialValues:{email:email,password:password},validationSchema:loginValidation,onSubmit:function onSubmit(){loginSubmit();},children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(LoginInput,{type:\"text\",name:\"email\",placeholder:\"Email address or phone number\",onChange:handleLoginChange}),/*#__PURE__*/_jsx(LoginInput,{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:handleLoginChange,bottom:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"blue_btn\",children:\"Log In\"})]});}}),/*#__PURE__*/_jsx(Link,{to:\"/reset\",className:\"forgot_password\",children:\"Forgotten password?\"}),/*#__PURE__*/_jsx(DotLoader,{color:\"#1876f2\",loading:loading,size:30}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error_text\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"sign_splitter\"}),/*#__PURE__*/_jsx(\"button\",{className:\"blue_btn open_signup\",onClick:function onClick(){return setVisible(true);},children:\"Create Account\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"sign_extra\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Create a Page\"}),\" for a celebrity, brand or business.\"]})]})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/components/login/LoginForm.js"],"names":["Formik","Form","Link","Yup","LoginInput","useState","DotLoader","axios","useDispatch","Cookies","useNavigate","loginInfos","email","password","LoginForm","setVisible","dispatch","navigate","login","setLogin","handleLoginChange","e","target","name","value","loginValidation","object","string","required","max","error","setError","loading","setLoading","loginSubmit","post","process","env","REACT_APP_BACKEND_URL","data","type","payload","set","JSON","stringify","response","message","formik"],"mappings":"ytBAAA,OAASA,MAAT,CAAiBC,IAAjB,KAA6B,QAA7B,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oCAAvB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFACA,GAAMC,CAAAA,UAAU,CAAG,CACjBC,KAAK,CAAE,EADU,CAEjBC,QAAQ,CAAE,EAFO,CAAnB,CAIA,cAAe,SAASC,CAAAA,SAAT,MAAmC,IAAdC,CAAAA,UAAc,MAAdA,UAAc,CAChD,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,cAA0BL,QAAQ,CAACM,UAAD,CAAlC,wCAAOO,KAAP,eAAcC,QAAd,eACA,GAAQP,CAAAA,KAAR,CAA4BM,KAA5B,CAAQN,KAAR,CAAeC,QAAf,CAA4BK,KAA5B,CAAeL,QAAf,CACA,GAAMO,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAC/B,cAAwBA,CAAC,CAACC,MAA1B,CAAQC,IAAR,WAAQA,IAAR,CAAcC,KAAd,WAAcA,KAAd,CACAL,QAAQ,gCAAMD,KAAN,wBAAcK,IAAd,CAAqBC,KAArB,GAAR,CACD,CAHD,CAIA,GAAMC,CAAAA,eAAe,CAAGtB,GAAG,CAACuB,MAAJ,CAAW,CACjCd,KAAK,CAAET,GAAG,CAACwB,MAAJ,GACJC,QADI,CACK,4BADL,EAEJhB,KAFI,CAEE,wBAFF,EAGJiB,GAHI,CAGA,GAHA,CAD0B,CAKjChB,QAAQ,CAAEV,GAAG,CAACwB,MAAJ,GAAaC,QAAb,CAAsB,sBAAtB,CALuB,CAAX,CAAxB,CAOA,eAA0BvB,QAAQ,CAAC,EAAD,CAAlC,yCAAOyB,KAAP,eAAcC,QAAd,eACA,eAA8B1B,QAAQ,CAAC,KAAD,CAAtC,yCAAO2B,OAAP,eAAgBC,UAAhB,eACA,GAAMC,CAAAA,WAAW,2FAAG,8KAEhBD,UAAU,CAAC,IAAD,CAAV,CAFgB,sBAGO1B,CAAAA,KAAK,CAAC4B,IAAN,WAClBC,OAAO,CAACC,GAAR,CAAYC,qBADM,WAErB,CACE1B,KAAK,CAALA,KADF,CAEEC,QAAQ,CAARA,QAFF,CAFqB,CAHP,wCAGR0B,IAHQ,mBAGRA,IAHQ,CAUhBvB,QAAQ,CAAC,CAAEwB,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAEF,IAA1B,CAAD,CAAR,CACA9B,OAAO,CAACiC,GAAR,CAAY,MAAZ,CAAoBC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAApB,EACAtB,QAAQ,CAAC,GAAD,CAAR,CAZgB,iFAchBgB,UAAU,CAAC,KAAD,CAAV,CACAF,QAAQ,CAAC,YAAMc,QAAN,CAAeN,IAAf,CAAoBO,OAArB,CAAR,CAfgB,qEAAH,kBAAXZ,CAAAA,WAAW,2CAAjB,CAkBA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,aAAK,SAAS,CAAC,SAAf,wBACE,YAAK,GAAG,CAAC,0BAAT,CAAoC,GAAG,CAAC,EAAxC,EADF,cAEE,4FAFF,GADF,cAOE,aAAK,SAAS,CAAC,SAAf,wBACE,aAAK,SAAS,CAAC,cAAf,wBACE,KAAC,MAAD,EACE,kBAAkB,KADpB,CAEE,aAAa,CAAE,CACbtB,KAAK,CAALA,KADa,CAEbC,QAAQ,CAARA,QAFa,CAFjB,CAME,gBAAgB,CAAEY,eANpB,CAOE,QAAQ,CAAE,mBAAM,CACdS,WAAW,GACZ,CATH,UAWG,kBAACa,MAAD,qBACC,MAAC,IAAD,yBACE,KAAC,UAAD,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,OAFP,CAGE,WAAW,CAAC,+BAHd,CAIE,QAAQ,CAAE3B,iBAJZ,EADF,cAOE,KAAC,UAAD,EACE,IAAI,CAAC,UADP,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,CAAEA,iBAJZ,CAKE,MAAM,KALR,EAPF,cAcE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,UAAhC,oBAdF,GADD,EAXH,EADF,cAiCE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,iBAA5B,iCAjCF,cAoCE,KAAC,SAAD,EAAW,KAAK,CAAC,SAAjB,CAA2B,OAAO,CAAEY,OAApC,CAA6C,IAAI,CAAE,EAAnD,EApCF,CAsCGF,KAAK,eAAI,YAAK,SAAS,CAAC,YAAf,UAA6BA,KAA7B,EAtCZ,cAuCE,YAAK,SAAS,CAAC,eAAf,EAvCF,cAwCE,eACE,SAAS,CAAC,sBADZ,CAEE,OAAO,CAAE,yBAAMf,CAAAA,UAAU,CAAC,IAAD,CAAhB,EAFX,4BAxCF,GADF,cAgDE,MAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,YAAvB,wBACE,oCADF,0CAhDF,GAPF,GADF,CA8DD","sourcesContent":["import { Formik, Form } from \"formik\";\r\nimport { Link } from \"react-router-dom\";\r\nimport * as Yup from \"yup\";\r\nimport LoginInput from \"../../components/inputs/loginInput\";\r\nimport { useState } from \"react\";\r\nimport DotLoader from \"react-spinners/DotLoader\";\r\nimport axios from \"axios\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Cookies from \"js-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst loginInfos = {\r\n  email: \"\",\r\n  password: \"\",\r\n};\r\nexport default function LoginForm({ setVisible }) {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [login, setLogin] = useState(loginInfos);\r\n  const { email, password } = login;\r\n  const handleLoginChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setLogin({ ...login, [name]: value });\r\n  };\r\n  const loginValidation = Yup.object({\r\n    email: Yup.string()\r\n      .required(\"Email address is required.\")\r\n      .email(\"Must be a valid email.\")\r\n      .max(100),\r\n    password: Yup.string().required(\"Password is required\"),\r\n  });\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const loginSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const { data } = await axios.post(\r\n        `${process.env.REACT_APP_BACKEND_URL}/login`,\r\n        {\r\n          email,\r\n          password,\r\n        }\r\n      );\r\n      dispatch({ type: \"LOGIN\", payload: data });\r\n      Cookies.set(\"user\", JSON.stringify(data));\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"login_wrap\">\r\n      <div className=\"login_1\">\r\n        <img src=\"../../icons/facebook.svg\" alt=\"\" />\r\n        <span>\r\n          Facebook helps you connect and share with the people in your life.\r\n        </span>\r\n      </div>\r\n      <div className=\"login_2\">\r\n        <div className=\"login_2_wrap\">\r\n          <Formik\r\n            enableReinitialize\r\n            initialValues={{\r\n              email,\r\n              password,\r\n            }}\r\n            validationSchema={loginValidation}\r\n            onSubmit={() => {\r\n              loginSubmit();\r\n            }}\r\n          >\r\n            {(formik) => (\r\n              <Form>\r\n                <LoginInput\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  placeholder=\"Email address or phone number\"\r\n                  onChange={handleLoginChange}\r\n                />\r\n                <LoginInput\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  placeholder=\"Password\"\r\n                  onChange={handleLoginChange}\r\n                  bottom\r\n                />\r\n                <button type=\"submit\" className=\"blue_btn\">\r\n                  Log In\r\n                </button>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n          <Link to=\"/reset\" className=\"forgot_password\">\r\n            Forgotten password?\r\n          </Link>\r\n          <DotLoader color=\"#1876f2\" loading={loading} size={30} />\r\n\r\n          {error && <div className=\"error_text\">{error}</div>}\r\n          <div className=\"sign_splitter\"></div>\r\n          <button\r\n            className=\"blue_btn open_signup\"\r\n            onClick={() => setVisible(true)}\r\n          >\r\n            Create Account\r\n          </button>\r\n        </div>\r\n        <Link to=\"/\" className=\"sign_extra\">\r\n          <b>Create a Page</b> for a celebrity, brand or business.\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}