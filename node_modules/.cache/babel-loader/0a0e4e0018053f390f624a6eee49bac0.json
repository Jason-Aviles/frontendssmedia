{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{Form,Formik}from\"formik\";import{useState}from\"react\";import{Link}from\"react-router-dom\";import LoginInput from\"../../components/inputs/loginInput\";import*as Yup from\"yup\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CodeVerification(_ref){var code=_ref.code,setCode=_ref.setCode,error=_ref.error,loading=_ref.loading,setLoading=_ref.setLoading,setVisible=_ref.setVisible,setError=_ref.setError,userInfos=_ref.userInfos;var validateCode=Yup.object({code:Yup.string().required(\"Code is required\").min(\"5\",\"Code must be 5 characters.\").max(\"5\",\"Code must be 5 characters.\")});var email=userInfos.email;var verifyCode=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/validateResetCode\"),{email:email,code:code});case 4:setVisible(3);setError(\"\");setLoading(false);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setLoading(false);setError(_context.t0.response.data.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function verifyCode(){return _ref2.apply(this,arguments);};}();console.log(email);return/*#__PURE__*/_jsxs(\"div\",{className:\"reset_form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"reset_form_header\",children:\"Code verification\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reset_form_text\",children:\"Please enter code that been sent to your email.\"}),/*#__PURE__*/_jsx(Formik,{enableReinitialize:true,initialValues:{code:code},validationSchema:validateCode,onSubmit:function onSubmit(){verifyCode();},children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(LoginInput,{type:\"text\",name:\"code\",onChange:function onChange(e){return setCode(e.target.value);},placeholder:\"Code\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error_text\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"reset_form_btns\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"gray_btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"blue_btn\",children:\"Continue\"})]})]});}})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/pages/reset/CodeVerification.js"],"names":["Form","Formik","useState","Link","LoginInput","Yup","axios","CodeVerification","code","setCode","error","loading","setLoading","setVisible","setError","userInfos","validateCode","object","string","required","min","max","email","verifyCode","post","process","env","REACT_APP_BACKEND_URL","response","data","message","console","log","formik","e","target","value"],"mappings":"qSAAA,OAASA,IAAT,CAAeC,MAAf,KAA6B,QAA7B,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oCAAvB,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFACA,cAAe,SAASC,CAAAA,gBAAT,MASZ,IARDC,CAAAA,IAQC,MARDA,IAQC,CAPDC,OAOC,MAPDA,OAOC,CANDC,KAMC,MANDA,KAMC,CALDC,OAKC,MALDA,OAKC,CAJDC,UAIC,MAJDA,UAIC,CAHDC,UAGC,MAHDA,UAGC,CAFDC,QAEC,MAFDA,QAEC,CADDC,SACC,MADDA,SACC,CACD,GAAMC,CAAAA,YAAY,CAAGX,GAAG,CAACY,MAAJ,CAAW,CAC9BT,IAAI,CAAEH,GAAG,CAACa,MAAJ,GACHC,QADG,CACM,kBADN,EAEHC,GAFG,CAEC,GAFD,CAEM,4BAFN,EAGHC,GAHG,CAGC,GAHD,CAGM,4BAHN,CADwB,CAAX,CAArB,CAMA,GAAQC,CAAAA,KAAR,CAAkBP,SAAlB,CAAQO,KAAR,CACA,GAAMC,CAAAA,UAAU,2FAAG,mJAEfX,UAAU,CAAC,IAAD,CAAV,CAFe,sBAGTN,CAAAA,KAAK,CAACkB,IAAN,WACDC,OAAO,CAACC,GAAR,CAAYC,qBADX,uBAEJ,CAAEL,KAAK,CAALA,KAAF,CAASd,IAAI,CAAJA,IAAT,CAFI,CAHS,QAOfK,UAAU,CAAC,CAAD,CAAV,CACAC,QAAQ,CAAC,EAAD,CAAR,CACAF,UAAU,CAAC,KAAD,CAAV,CATe,+EAWfA,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAAC,YAAMc,QAAN,CAAeC,IAAf,CAAoBC,OAArB,CAAR,CAZe,oEAAH,kBAAVP,CAAAA,UAAU,2CAAhB,CAeAQ,OAAO,CAACC,GAAR,CAAYV,KAAZ,EACA,mBACE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,mBAAf,+BADF,cAEE,YAAK,SAAS,CAAC,iBAAf,6DAFF,cAKE,KAAC,MAAD,EACE,kBAAkB,KADpB,CAEE,aAAa,CAAE,CACbd,IAAI,CAAJA,IADa,CAFjB,CAKE,gBAAgB,CAAEQ,YALpB,CAME,QAAQ,CAAE,mBAAM,CACdO,UAAU,GACX,CARH,UAUG,kBAACU,MAAD,qBACC,MAAC,IAAD,yBACE,KAAC,UAAD,EACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAE,kBAACC,CAAD,QAAOzB,CAAAA,OAAO,CAACyB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,EAHZ,CAIE,WAAW,CAAC,MAJd,EADF,CAOG1B,KAAK,eAAI,YAAK,SAAS,CAAC,YAAf,UAA6BA,KAA7B,EAPZ,cAQE,aAAK,SAAS,CAAC,iBAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,SAAS,CAAC,UAA5B,oBADF,cAIE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,UAAhC,sBAJF,GARF,GADD,EAVH,EALF,GADF,CAsCD","sourcesContent":["import { Form, Formik } from \"formik\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginInput from \"../../components/inputs/loginInput\";\r\nimport * as Yup from \"yup\";\r\nimport axios from \"axios\";\r\nexport default function CodeVerification({\r\n  code,\r\n  setCode,\r\n  error,\r\n  loading,\r\n  setLoading,\r\n  setVisible,\r\n  setError,\r\n  userInfos,\r\n}) {\r\n  const validateCode = Yup.object({\r\n    code: Yup.string()\r\n      .required(\"Code is required\")\r\n      .min(\"5\", \"Code must be 5 characters.\")\r\n      .max(\"5\", \"Code must be 5 characters.\"),\r\n  });\r\n  const { email } = userInfos;\r\n  const verifyCode = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.post(\r\n        `${process.env.REACT_APP_BACKEND_URL}/validateResetCode`,\r\n        { email, code }\r\n      );\r\n      setVisible(3);\r\n      setError(\"\");\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n  console.log(email);\r\n  return (\r\n    <div className=\"reset_form\">\r\n      <div className=\"reset_form_header\">Code verification</div>\r\n      <div className=\"reset_form_text\">\r\n        Please enter code that been sent to your email.\r\n      </div>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          code,\r\n        }}\r\n        validationSchema={validateCode}\r\n        onSubmit={() => {\r\n          verifyCode();\r\n        }}\r\n      >\r\n        {(formik) => (\r\n          <Form>\r\n            <LoginInput\r\n              type=\"text\"\r\n              name=\"code\"\r\n              onChange={(e) => setCode(e.target.value)}\r\n              placeholder=\"Code\"\r\n            />\r\n            {error && <div className=\"error_text\">{error}</div>}\r\n            <div className=\"reset_form_btns\">\r\n              <Link to=\"/login\" className=\"gray_btn\">\r\n                Cancel\r\n              </Link>\r\n              <button type=\"submit\" className=\"blue_btn\">\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}