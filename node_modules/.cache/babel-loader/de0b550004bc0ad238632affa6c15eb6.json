{"ast":null,"code":"import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useRef,useState}from\"react\";import\"./style.css\";import UpdateProfilePicture from\"./UpdateProfilePicture\";import useOnClickOutside from\"../../helpers/clickOutside\";import{photosReducer}from\"../../functions/reducers\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfilePicture(_ref){var username=_ref.username,setShow=_ref.setShow,pRef=_ref.pRef,photos=_ref.photos;var popup=useRef(null);var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;//useOnClickOutside(popup, () => setShow(false));\nvar refInput=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleImage=function handleImage(e){var file=e.target.files[0];if(file.type!==\"image/jpeg\"&&file.type!==\"image/png\"&&file.type!==\"image/webp\"&&file.type!==\"image/gif\"){setError(\"\".concat(file.name,\" format is not supported.\"));return;}else if(file.size>1024*1024*5){setError(\"\".concat(file.name,\" is too large max 5mb allowed.\"));return;}var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(event){setImage(event.target.result);};};return/*#__PURE__*/_jsxs(\"div\",{className:\"blur\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:refInput,hidden:true,onChange:handleImage,accept:\"image/jpeg,image/png,image/webp,image/gif\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"postBox pictureBox\",ref:popup,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box_header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"small_circle\",onClick:function onClick(){return setShow(false);},children:/*#__PURE__*/_jsx(\"i\",{className:\"exit_icon\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Update profile picture\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"update_picture_wrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"update_picture_buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"light_blue_btn\",onClick:function onClick(){return refInput.current.click();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"plus_icon filter_blue\"}),\"Upload photo\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"gray_btn\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"frame_icon\"}),\"Add frame\"]})]})}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"postError comment_error\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"postError_error\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"blue_btn\",onClick:function onClick(){return setError(\"\");},children:\"Try again\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"old_pictures_wrap scrollbar\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"your profile pictures\"}),/*#__PURE__*/_jsx(\"div\",{className:\"old_pictures\",children:photos.filter(function(img){return img.folder===\"\".concat(user.username,\"/profile_pictures\");}).map(function(photo){return/*#__PURE__*/_jsx(\"img\",{src:photo.secure_url,alt:\"\",onClick:function onClick(){return setImage(photo.secure_url);}},photo.public_id);})}),/*#__PURE__*/_jsx(\"h4\",{children:\"other pictures\"}),/*#__PURE__*/_jsx(\"div\",{className:\"old_pictures\",children:photos.filter(function(img){return img.folder!==\"\".concat(user.username,\"/profile_pictures\");}).map(function(photo){return/*#__PURE__*/_jsx(\"img\",{src:photo.secure_url,alt:\"\",onClick:function onClick(){return setImage(photo.secure_url);}},photo.public_id);})})]})]}),image&&/*#__PURE__*/_jsx(UpdateProfilePicture,{setImage:setImage,image:image,setShow:setShow,setError:setError,pRef:pRef})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/components/profielPicture/index.js"],"names":["useRef","useState","UpdateProfilePicture","useOnClickOutside","photosReducer","useSelector","ProfilePicture","username","setShow","pRef","photos","popup","state","user","refInput","image","setImage","error","setError","handleImage","e","file","target","files","type","name","size","reader","FileReader","readAsDataURL","onload","event","result","current","click","filter","img","folder","map","photo","secure_url","public_id"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\r\nimport \"./style.css\";\r\nimport UpdateProfilePicture from \"./UpdateProfilePicture\";\r\nimport useOnClickOutside from \"../../helpers/clickOutside\";\r\nimport { photosReducer } from \"../../functions/reducers\";\r\nimport { useSelector } from \"react-redux\";\r\nexport default function ProfilePicture({ username, setShow, pRef, photos }) {\r\n  const popup = useRef(null);\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  //useOnClickOutside(popup, () => setShow(false));\r\n  const refInput = useRef(null);\r\n  const [image, setImage] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const handleImage = (e) => {\r\n    let file = e.target.files[0];\r\n    if (\r\n      file.type !== \"image/jpeg\" &&\r\n      file.type !== \"image/png\" &&\r\n      file.type !== \"image/webp\" &&\r\n      file.type !== \"image/gif\"\r\n    ) {\r\n      setError(`${file.name} format is not supported.`);\r\n      return;\r\n    } else if (file.size > 1024 * 1024 * 5) {\r\n      setError(`${file.name} is too large max 5mb allowed.`);\r\n      return;\r\n    }\r\n\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = (event) => {\r\n      setImage(event.target.result);\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div className=\"blur\">\r\n      <input\r\n        type=\"file\"\r\n        ref={refInput}\r\n        hidden\r\n        onChange={handleImage}\r\n        accept=\"image/jpeg,image/png,image/webp,image/gif\"\r\n      />\r\n      <div className=\"postBox pictureBox\" ref={popup}>\r\n        <div className=\"box_header\">\r\n          <div className=\"small_circle\" onClick={() => setShow(false)}>\r\n            <i className=\"exit_icon\"></i>\r\n          </div>\r\n          <span>Update profile picture</span>\r\n        </div>\r\n        <div className=\"update_picture_wrap\">\r\n          <div className=\"update_picture_buttons\">\r\n            <button\r\n              className=\"light_blue_btn\"\r\n              onClick={() => refInput.current.click()}\r\n            >\r\n              <i className=\"plus_icon filter_blue\"></i>\r\n              Upload photo\r\n            </button>\r\n            <button className=\"gray_btn\">\r\n              <i className=\"frame_icon\"></i>\r\n              Add frame\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {error && (\r\n          <div className=\"postError comment_error\">\r\n            <div className=\"postError_error\">{error}</div>\r\n            <button className=\"blue_btn\" onClick={() => setError(\"\")}>\r\n              Try again\r\n            </button>\r\n          </div>\r\n        )}\r\n        <div className=\"old_pictures_wrap scrollbar\">\r\n          <h4>your profile pictures</h4>\r\n          <div className=\"old_pictures\">\r\n            {photos\r\n              .filter(\r\n                (img) => img.folder === `${user.username}/profile_pictures`\r\n              )\r\n              .map((photo) => (\r\n                <img\r\n                  src={photo.secure_url}\r\n                  key={photo.public_id}\r\n                  alt=\"\"\r\n                  onClick={() => setImage(photo.secure_url)}\r\n                />\r\n              ))}\r\n          </div>\r\n          <h4>other pictures</h4>\r\n          <div className=\"old_pictures\">\r\n            {photos\r\n              .filter(\r\n                (img) => img.folder !== `${user.username}/profile_pictures`\r\n              )\r\n              .map((photo) => (\r\n                <img\r\n                  src={photo.secure_url}\r\n                  key={photo.public_id}\r\n                  alt=\"\"\r\n                  onClick={() => setImage(photo.secure_url)}\r\n                />\r\n              ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {image && (\r\n        <UpdateProfilePicture\r\n          setImage={setImage}\r\n          image={image}\r\n          setShow={setShow}\r\n          setError={setError}\r\n          pRef={pRef}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}