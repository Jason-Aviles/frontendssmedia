{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{Routes,Route}from\"react-router-dom\";import Login from\"./pages/login\";import Profile from\"./pages/profile\";import Home from\"./pages/home\";import LoggedInRoutes from\"./routes/LoggedInRoutes\";import NotLoggedInRoutes from\"./routes/NotLoggedInRoutes\";import{useSelector}from\"react-redux\";import Activate from\"./pages/home/activate\";import Reset from\"./pages/reset\";import CreatePostPopup from\"./components/createPostPopup\";import{useEffect,useReducer,useState}from\"react\";import axios from\"axios\";import{postsReducer}from\"./functions/reducers\";import Friends from\"./pages/friends\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user,darkTheme=_useSelector.darkTheme;var _useReducer=useReducer(postsReducer,{loading:false,posts:[],error:\"\"}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,posts=_useReducer2$.posts,dispatch=_useReducer2[1];useEffect(function(){getAllPosts();},[]);var getAllPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:\"POSTS_REQUEST\"});_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/getAllposts\"),{headers:{Authorization:\"Bearer \".concat(user.token)}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch({type:\"POSTS_SUCCESS\",payload:data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);dispatch({type:\"POSTS_ERROR\",payload:_context.t0.response.data.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getAllPosts(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:darkTheme&&\"dark\",children:[visible&&/*#__PURE__*/_jsx(CreatePostPopup,{user:user,setVisible:setVisible,posts:posts,dispatch:dispatch}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(LoggedInRoutes,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{setVisible:setVisible,getAllPosts:getAllPosts}),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/profile/:username\",element:/*#__PURE__*/_jsx(Profile,{setVisible:setVisible,getAllPosts:getAllPosts}),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/friends\",element:/*#__PURE__*/_jsx(Friends,{setVisible:setVisible,getAllPosts:getAllPosts}),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/friends/:type\",element:/*#__PURE__*/_jsx(Friends,{setVisible:setVisible,getAllPosts:getAllPosts}),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{setVisible:setVisible,posts:posts,loading:loading,getAllPosts:getAllPosts}),exact:true}),/*#__PURE__*/_jsx(Route,{path:\"/activate/:token\",element:/*#__PURE__*/_jsx(Activate,{}),exact:true})]}),/*#__PURE__*/_jsx(Route,{element:/*#__PURE__*/_jsx(NotLoggedInRoutes,{}),children:/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{}),exact:true})}),/*#__PURE__*/_jsx(Route,{path:\"/reset\",element:/*#__PURE__*/_jsx(Reset,{})})]})]});}export default App;","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/App.js"],"names":["Routes","Route","Login","Profile","Home","LoggedInRoutes","NotLoggedInRoutes","useSelector","Activate","Reset","CreatePostPopup","useEffect","useReducer","useState","axios","postsReducer","Friends","App","visible","setVisible","state","user","darkTheme","loading","posts","error","dispatch","getAllPosts","type","get","process","env","REACT_APP_BACKEND_URL","headers","Authorization","token","data","payload","response","message"],"mappings":"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","sourcesContent":["import { Routes, Route } from \"react-router-dom\";\nimport Login from \"./pages/login\";\nimport Profile from \"./pages/profile\";\nimport Home from \"./pages/home\";\nimport LoggedInRoutes from \"./routes/LoggedInRoutes\";\nimport NotLoggedInRoutes from \"./routes/NotLoggedInRoutes\";\nimport { useSelector } from \"react-redux\";\nimport Activate from \"./pages/home/activate\";\nimport Reset from \"./pages/reset\";\nimport CreatePostPopup from \"./components/createPostPopup\";\nimport { useEffect, useReducer, useState } from \"react\";\nimport axios from \"axios\";\nimport { postsReducer } from \"./functions/reducers\";\nimport Friends from \"./pages/friends\";\n\nfunction App() {\n  const [visible, setVisible] = useState(false);\n  const { user, darkTheme } = useSelector((state) => ({ ...state }));\n  const [{ loading, error, posts }, dispatch] = useReducer(postsReducer, {\n    loading: false,\n    posts: [],\n    error: \"\",\n  });\n  useEffect(() => {\n    getAllPosts();\n  }, []);\n  const getAllPosts = async () => {\n    try {\n      dispatch({\n        type: \"POSTS_REQUEST\",\n      });\n      const { data } = await axios.get(\n        `${process.env.REACT_APP_BACKEND_URL}/getAllposts`,\n        {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        }\n      );\n      dispatch({\n        type: \"POSTS_SUCCESS\",\n        payload: data,\n      });\n    } catch (error) {\n      dispatch({\n        type: \"POSTS_ERROR\",\n        payload: error.response.data.message,\n      });\n    }\n  };\n  return (\n    <div className={darkTheme && \"dark\"}>\n      {visible && (\n        <CreatePostPopup\n          user={user}\n          setVisible={setVisible}\n          posts={posts}\n          dispatch={dispatch}\n        />\n      )}\n      <Routes>\n        <Route element={<LoggedInRoutes />}>\n          <Route\n            path=\"/profile\"\n            element={\n              <Profile setVisible={setVisible} getAllPosts={getAllPosts} />\n            }\n            exact\n          />\n          <Route\n            path=\"/profile/:username\"\n            element={\n              <Profile setVisible={setVisible} getAllPosts={getAllPosts} />\n            }\n            exact\n          />\n          <Route\n            path=\"/friends\"\n            element={\n              <Friends setVisible={setVisible} getAllPosts={getAllPosts} />\n            }\n            exact\n          />\n          <Route\n            path=\"/friends/:type\"\n            element={\n              <Friends setVisible={setVisible} getAllPosts={getAllPosts} />\n            }\n            exact\n          />\n          <Route\n            path=\"/\"\n            element={\n              <Home\n                setVisible={setVisible}\n                posts={posts}\n                loading={loading}\n                getAllPosts={getAllPosts}\n              />\n            }\n            exact\n          />\n          <Route path=\"/activate/:token\" element={<Activate />} exact />\n        </Route>\n        <Route element={<NotLoggedInRoutes />}>\n          <Route path=\"/login\" element={<Login />} exact />\n        </Route>\n        <Route path=\"/reset\" element={<Reset />} />\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}