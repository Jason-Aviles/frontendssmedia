{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import axios from\"axios\";import{useEffect,useReducer,useRef,useState}from\"react\";import{useSelector}from\"react-redux\";import{Link,useNavigate,useParams}from\"react-router-dom\";import{profileReducer}from\"../../functions/reducers\";import Header from\"../../components/header\";import\"./style.css\";import Cover from\"./Cover\";import ProfielPictureInfos from\"./ProfielPictureInfos\";import ProfileMenu from\"./ProfileMenu\";import PplYouMayKnow from\"./PplYouMayKnow\";import CreatePost from\"../../components/createPost\";import GridPosts from\"./GridPosts\";import Post from\"../../components/post\";import Photos from\"./Photos\";import Friends from\"./Friends\";import Intro from\"../../components/intro\";import{useMediaQuery}from\"react-responsive\";import CreatePostPopup from\"../../components/createPostPopup\";import Skeleton,{SkeletonTheme}from\"react-loading-skeleton\";import\"react-loading-skeleton/dist/skeleton.css\";import{HashLoader}from\"react-spinners\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(_ref){var getAllPosts=_ref.getAllPosts;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useParams=useParams(),username=_useParams.username;var navigate=useNavigate();var _useSelector=useSelector(function(state){return _objectSpread({},state);}),user=_useSelector.user;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),photos=_useState4[0],setPhotos=_useState4[1];var userName=username===undefined?user.username:username;var _useReducer=useReducer(profileReducer,{loading:false,profile:{},error:\"\"}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,profile=_useReducer2$.profile,dispatch=_useReducer2[1];useEffect(function(){getProfile();},[userName]);useEffect(function(){var _profile$details;setOthername(profile===null||profile===void 0?void 0:(_profile$details=profile.details)===null||_profile$details===void 0?void 0:_profile$details.otherName);},[profile]);var visitor=userName===user.username?false:true;var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),othername=_useState6[0],setOthername=_useState6[1];var path=\"\".concat(userName,\"/*\");var max=30;var sort=\"desc\";var getProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data,images;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:\"PROFILE_REQUEST\"});_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/getProfile/\").concat(userName),{headers:{Authorization:\"Bearer \".concat(user.token)}});case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.ok===false)){_context.next=10;break;}navigate(\"/profile\");_context.next=21;break;case 10:_context.prev=10;_context.next=13;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/listImages\"),{path:path,sort:sort,max:max},{headers:{Authorization:\"Bearer \".concat(user.token)}});case 13:images=_context.sent;setPhotos(images.data);_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](10);console.log(_context.t0);case 20:dispatch({type:\"PROFILE_SUCCESS\",payload:data});case 21:_context.next=26;break;case 23:_context.prev=23;_context.t1=_context[\"catch\"](0);dispatch({type:\"PROFILE_ERROR\",payload:_context.t1.response.data.message});case 26:case\"end\":return _context.stop();}}},_callee,null,[[0,23],[10,17]]);}));return function getProfile(){return _ref2.apply(this,arguments);};}();var profileTop=useRef(null);var leftSide=useRef(null);var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),height=_useState8[0],setHeight=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),leftHeight=_useState10[0],setLeftHeight=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),scrollHeight=_useState12[0],setScrollHeight=_useState12[1];useEffect(function(){setHeight(profileTop.current.clientHeight+300);setLeftHeight(leftSide.current.clientHeight);window.addEventListener(\"scroll\",getScroll,{passive:true});return function(){window.addEventListener(\"scroll\",getScroll,{passive:true});};},[loading,scrollHeight]);var check=useMediaQuery({query:\"(min-width:901px)\"});var getScroll=function getScroll(){setScrollHeight(window.pageYOffset);};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[visible&&/*#__PURE__*/_jsx(CreatePostPopup,{user:user,setVisible:setVisible,posts:profile===null||profile===void 0?void 0:profile.posts,dispatch:dispatch,profile:true}),/*#__PURE__*/_jsx(Header,{page:\"profile\",getAllPosts:getAllPosts}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_top\",ref:profileTop,children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile_container\",children:[loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile_cover\",children:/*#__PURE__*/_jsx(Skeleton,{height:\"347px\",containerClassName:\"avatar-skeleton\",style:{borderRadius:\"8px\"}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_img_wrap\",style:{marginBottom:\"-3rem\",transform:\"translateY(-8px)\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_w_left\",children:[/*#__PURE__*/_jsx(Skeleton,{circle:true,height:\"180px\",width:\"180px\",containerClassName:\"avatar-skeleton\",style:{transform:\"translateY(-3.3rem)\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_w_col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_name\",children:[/*#__PURE__*/_jsx(Skeleton,{height:\"35px\",width:\"200px\",containerClassName:\"avatar-skeleton\"}),/*#__PURE__*/_jsx(Skeleton,{height:\"30px\",width:\"100px\",containerClassName:\"avatar-skeleton\",style:{transform:\"translateY(2.5px)\"}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_friend_count\",children:/*#__PURE__*/_jsx(Skeleton,{height:\"20px\",width:\"90px\",containerClassName:\"avatar-skeleton\",style:{marginTop:\"5px\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_friend_imgs\",children:Array.from(new Array(6),function(val,i){return i+1;}).map(function(id,i){return/*#__PURE__*/_jsx(Skeleton,{circle:true,height:\"32px\",width:\"32px\",containerClassName:\"avatar-skeleton\",style:{transform:\"translateX(\".concat(-i*7,\"px)\")}});})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"friendship \".concat(!visitor&&\"fix\"),children:[/*#__PURE__*/_jsx(Skeleton,{height:\"36px\",width:120,containerClassName:\"avatar-skeleton\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(Skeleton,{height:\"36px\",width:120,containerClassName:\"avatar-skeleton\"}),visitor&&/*#__PURE__*/_jsx(Skeleton,{height:\"36px\",width:120,containerClassName:\"avatar-skeleton\"})]})]})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Cover,{cover:profile.cover,visitor:visitor,photos:photos.resources}),/*#__PURE__*/_jsx(ProfielPictureInfos,{profile:profile,visitor:visitor,photos:photos.resources,othername:othername,loading:loading})]}),/*#__PURE__*/_jsx(ProfileMenu,{})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile_bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"profile_container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bottom_container\",children:[/*#__PURE__*/_jsx(PplYouMayKnow,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_grid \".concat(check&&scrollHeight>=height&&leftHeight>1000?\"scrollFixed showLess\":check&&scrollHeight>=height&&leftHeight<1000&&\"scrollFixed showMore\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_left\",ref:leftSide,children:[loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile_card_header\",children:\"Intro\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sekelton_loader\",children:/*#__PURE__*/_jsx(HashLoader,{color:\"#1876f2\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card_header\",children:[\"Photos\",/*#__PURE__*/_jsx(\"div\",{className:\"profile_header_link\",children:\"See all photos\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sekelton_loader\",children:/*#__PURE__*/_jsx(HashLoader,{color:\"#1876f2\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card_header\",children:[\"Friends\",/*#__PURE__*/_jsx(\"div\",{className:\"profile_header_link\",children:\"See all friends\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sekelton_loader\",children:/*#__PURE__*/_jsx(HashLoader,{color:\"#1876f2\"})})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Intro,{detailss:profile.details,visitor:visitor,setOthername:setOthername}),/*#__PURE__*/_jsx(Photos,{username:userName,token:user.token,photos:photos}),/*#__PURE__*/_jsx(Friends,{friends:profile.friends})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative_fb_copyright\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Privacy \"}),/*#__PURE__*/_jsx(\"span\",{children:\". \"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Terms \"}),/*#__PURE__*/_jsx(\"span\",{children:\". \"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Advertising \"}),/*#__PURE__*/_jsx(\"span\",{children:\". \"}),/*#__PURE__*/_jsxs(Link,{to:\"/\",children:[\"Ad Choices \",/*#__PURE__*/_jsx(\"i\",{className:\"ad_choices_icon\"}),\" \"]}),/*#__PURE__*/_jsx(\"span\",{children:\". \"}),/*#__PURE__*/_jsx(Link,{to:\"/\"}),\"Cookies \",/*#__PURE__*/_jsx(\"span\",{children:\". \"}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"More \"}),/*#__PURE__*/_jsx(\"span\",{children:\". \"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Meta \\xA9 2022\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_right\",children:[!visitor&&/*#__PURE__*/_jsx(CreatePost,{user:user,profile:true,setVisible:setVisible}),/*#__PURE__*/_jsx(GridPosts,{}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"sekelton_loader\",children:/*#__PURE__*/_jsx(HashLoader,{color:\"#1876f2\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:profile.posts&&profile.posts.length?profile.posts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post,user:user,profile:true},post._id);}):/*#__PURE__*/_jsx(\"div\",{className:\"no_posts\",children:\"No posts available\"})})]})]})]})})})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/pages/profile/index.js"],"names":["axios","useEffect","useReducer","useRef","useState","useSelector","Link","useNavigate","useParams","profileReducer","Header","Cover","ProfielPictureInfos","ProfileMenu","PplYouMayKnow","CreatePost","GridPosts","Post","Photos","Friends","Intro","useMediaQuery","CreatePostPopup","Skeleton","SkeletonTheme","HashLoader","Profile","getAllPosts","visible","setVisible","username","navigate","state","user","photos","setPhotos","userName","undefined","loading","profile","error","dispatch","getProfile","setOthername","details","otherName","visitor","othername","path","max","sort","type","get","process","env","REACT_APP_BACKEND_URL","headers","Authorization","token","data","ok","post","images","console","log","payload","response","message","profileTop","leftSide","height","setHeight","leftHeight","setLeftHeight","scrollHeight","setScrollHeight","current","clientHeight","window","addEventListener","getScroll","passive","check","query","pageYOffset","posts","borderRadius","marginBottom","transform","marginTop","Array","from","val","i","map","id","cover","resources","friends","length","_id"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useReducer, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport { profileReducer } from \"../../functions/reducers\";\r\nimport Header from \"../../components/header\";\r\nimport \"./style.css\";\r\nimport Cover from \"./Cover\";\r\nimport ProfielPictureInfos from \"./ProfielPictureInfos\";\r\nimport ProfileMenu from \"./ProfileMenu\";\r\nimport PplYouMayKnow from \"./PplYouMayKnow\";\r\nimport CreatePost from \"../../components/createPost\";\r\nimport GridPosts from \"./GridPosts\";\r\nimport Post from \"../../components/post\";\r\nimport Photos from \"./Photos\";\r\nimport Friends from \"./Friends\";\r\nimport Intro from \"../../components/intro\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport CreatePostPopup from \"../../components/createPostPopup\";\r\nimport Skeleton, { SkeletonTheme } from \"react-loading-skeleton\";\r\nimport \"react-loading-skeleton/dist/skeleton.css\";\r\nimport { HashLoader } from \"react-spinners\";\r\nexport default function Profile({ getAllPosts }) {\r\n  const [visible, setVisible] = useState(false);\r\n  const { username } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useSelector((state) => ({ ...state }));\r\n  const [photos, setPhotos] = useState({});\r\n  var userName = username === undefined ? user.username : username;\r\n\r\n  const [{ loading, error, profile }, dispatch] = useReducer(profileReducer, {\r\n    loading: false,\r\n    profile: {},\r\n    error: \"\",\r\n  });\r\n  useEffect(() => {\r\n    getProfile();\r\n  }, [userName]);\r\n  useEffect(() => {\r\n    setOthername(profile?.details?.otherName);\r\n  }, [profile]);\r\n\r\n  var visitor = userName === user.username ? false : true;\r\n  const [othername, setOthername] = useState();\r\n  const path = `${userName}/*`;\r\n  const max = 30;\r\n  const sort = \"desc\";\r\n\r\n  const getProfile = async () => {\r\n    try {\r\n      dispatch({\r\n        type: \"PROFILE_REQUEST\",\r\n      });\r\n      const { data } = await axios.get(\r\n        `${process.env.REACT_APP_BACKEND_URL}/getProfile/${userName}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        }\r\n      );\r\n      if (data.ok === false) {\r\n        navigate(\"/profile\");\r\n      } else {\r\n        try {\r\n          const images = await axios.post(\r\n            `${process.env.REACT_APP_BACKEND_URL}/listImages`,\r\n            { path, sort, max },\r\n            {\r\n              headers: {\r\n                Authorization: `Bearer ${user.token}`,\r\n              },\r\n            }\r\n          );\r\n          setPhotos(images.data);\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n        dispatch({\r\n          type: \"PROFILE_SUCCESS\",\r\n          payload: data,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      dispatch({\r\n        type: \"PROFILE_ERROR\",\r\n        payload: error.response.data.message,\r\n      });\r\n    }\r\n  };\r\n  const profileTop = useRef(null);\r\n  const leftSide = useRef(null);\r\n  const [height, setHeight] = useState();\r\n  const [leftHeight, setLeftHeight] = useState();\r\n  const [scrollHeight, setScrollHeight] = useState();\r\n  useEffect(() => {\r\n    setHeight(profileTop.current.clientHeight + 300);\r\n    setLeftHeight(leftSide.current.clientHeight);\r\n    window.addEventListener(\"scroll\", getScroll, { passive: true });\r\n    return () => {\r\n      window.addEventListener(\"scroll\", getScroll, { passive: true });\r\n    };\r\n  }, [loading, scrollHeight]);\r\n  const check = useMediaQuery({\r\n    query: \"(min-width:901px)\",\r\n  });\r\n  const getScroll = () => {\r\n    setScrollHeight(window.pageYOffset);\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {visible && (\r\n        <CreatePostPopup\r\n          user={user}\r\n          setVisible={setVisible}\r\n          posts={profile?.posts}\r\n          dispatch={dispatch}\r\n          profile\r\n        />\r\n      )}\r\n      <Header page=\"profile\" getAllPosts={getAllPosts} />\r\n      <div className=\"profile_top\" ref={profileTop}>\r\n        <div className=\"profile_container\">\r\n          {loading ? (\r\n            <>\r\n              <div className=\"profile_cover\">\r\n                <Skeleton\r\n                  height=\"347px\"\r\n                  containerClassName=\"avatar-skeleton\"\r\n                  style={{ borderRadius: \"8px\" }}\r\n                />\r\n              </div>\r\n              <div\r\n                className=\"profile_img_wrap\"\r\n                style={{\r\n                  marginBottom: \"-3rem\",\r\n                  transform: \"translateY(-8px)\",\r\n                }}\r\n              >\r\n                <div className=\"profile_w_left\">\r\n                  <Skeleton\r\n                    circle\r\n                    height=\"180px\"\r\n                    width=\"180px\"\r\n                    containerClassName=\"avatar-skeleton\"\r\n                    style={{ transform: \"translateY(-3.3rem)\" }}\r\n                  />\r\n                  <div className=\"profile_w_col\">\r\n                    <div className=\"profile_name\">\r\n                      <Skeleton\r\n                        height=\"35px\"\r\n                        width=\"200px\"\r\n                        containerClassName=\"avatar-skeleton\"\r\n                      />\r\n                      <Skeleton\r\n                        height=\"30px\"\r\n                        width=\"100px\"\r\n                        containerClassName=\"avatar-skeleton\"\r\n                        style={{ transform: \"translateY(2.5px)\" }}\r\n                      />\r\n                    </div>\r\n                    <div className=\"profile_friend_count\">\r\n                      <Skeleton\r\n                        height=\"20px\"\r\n                        width=\"90px\"\r\n                        containerClassName=\"avatar-skeleton\"\r\n                        style={{ marginTop: \"5px\" }}\r\n                      />\r\n                    </div>\r\n                    <div className=\"profile_friend_imgs\">\r\n                      {Array.from(new Array(6), (val, i) => i + 1).map(\r\n                        (id, i) => (\r\n                          <Skeleton\r\n                            circle\r\n                            height=\"32px\"\r\n                            width=\"32px\"\r\n                            containerClassName=\"avatar-skeleton\"\r\n                            style={{ transform: `translateX(${-i * 7}px)` }}\r\n                          />\r\n                        )\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className={`friendship ${!visitor && \"fix\"}`}>\r\n                  <Skeleton\r\n                    height=\"36px\"\r\n                    width={120}\r\n                    containerClassName=\"avatar-skeleton\"\r\n                  />\r\n                  <div className=\"flex\">\r\n                    <Skeleton\r\n                      height=\"36px\"\r\n                      width={120}\r\n                      containerClassName=\"avatar-skeleton\"\r\n                    />\r\n                    {visitor && (\r\n                      <Skeleton\r\n                        height=\"36px\"\r\n                        width={120}\r\n                        containerClassName=\"avatar-skeleton\"\r\n                      />\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Cover\r\n                cover={profile.cover}\r\n                visitor={visitor}\r\n                photos={photos.resources}\r\n              />\r\n              <ProfielPictureInfos\r\n                profile={profile}\r\n                visitor={visitor}\r\n                photos={photos.resources}\r\n                othername={othername}\r\n                loading={loading}\r\n              />\r\n            </>\r\n          )}\r\n\r\n          <ProfileMenu />\r\n        </div>\r\n      </div>\r\n      <div className=\"profile_bottom\">\r\n        <div className=\"profile_container\">\r\n          <div className=\"bottom_container\">\r\n            <PplYouMayKnow />\r\n            <div\r\n              className={`profile_grid ${\r\n                check && scrollHeight >= height && leftHeight > 1000\r\n                  ? \"scrollFixed showLess\"\r\n                  : check &&\r\n                    scrollHeight >= height &&\r\n                    leftHeight < 1000 &&\r\n                    \"scrollFixed showMore\"\r\n              }`}\r\n            >\r\n              <div className=\"profile_left\" ref={leftSide}>\r\n                {loading ? (\r\n                  <>\r\n                    <div className=\"profile_card\">\r\n                      <div className=\"profile_card_header\">Intro</div>\r\n                      <div className=\"sekelton_loader\">\r\n                        <HashLoader color=\"#1876f2\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"profile_card\">\r\n                      <div className=\"profile_card_header\">\r\n                        Photos\r\n                        <div className=\"profile_header_link\">\r\n                          See all photos\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"sekelton_loader\">\r\n                        <HashLoader color=\"#1876f2\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"profile_card\">\r\n                      <div className=\"profile_card_header\">\r\n                        Friends\r\n                        <div className=\"profile_header_link\">\r\n                          See all friends\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"sekelton_loader\">\r\n                        <HashLoader color=\"#1876f2\" />\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Intro\r\n                      detailss={profile.details}\r\n                      visitor={visitor}\r\n                      setOthername={setOthername}\r\n                    />\r\n                    <Photos\r\n                      username={userName}\r\n                      token={user.token}\r\n                      photos={photos}\r\n                    />\r\n                    <Friends friends={profile.friends} />\r\n                  </>\r\n                )}\r\n                <div className=\"relative_fb_copyright\">\r\n                  <Link to=\"/\">Privacy </Link>\r\n                  <span>. </span>\r\n                  <Link to=\"/\">Terms </Link>\r\n                  <span>. </span>\r\n                  <Link to=\"/\">Advertising </Link>\r\n                  <span>. </span>\r\n                  <Link to=\"/\">\r\n                    Ad Choices <i className=\"ad_choices_icon\"></i>{\" \"}\r\n                  </Link>\r\n                  <span>. </span>\r\n                  <Link to=\"/\"></Link>Cookies <span>. </span>\r\n                  <Link to=\"/\">More </Link>\r\n                  <span>. </span> <br />\r\n                  Meta Â© 2022\r\n                </div>\r\n              </div>\r\n              <div className=\"profile_right\">\r\n                {!visitor && (\r\n                  <CreatePost user={user} profile setVisible={setVisible} />\r\n                )}\r\n                <GridPosts />\r\n                {loading ? (\r\n                  <div className=\"sekelton_loader\">\r\n                    <HashLoader color=\"#1876f2\" />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"posts\">\r\n                    {profile.posts && profile.posts.length ? (\r\n                      profile.posts.map((post) => (\r\n                        <Post post={post} user={user} key={post._id} profile />\r\n                      ))\r\n                    ) : (\r\n                      <div className=\"no_posts\">No posts available</div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}