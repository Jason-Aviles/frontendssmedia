{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{Form,Formik}from\"formik\";import{useState}from\"react\";import{Link,Navigate,useNavigate}from\"react-router-dom\";import LoginInput from\"../../components/inputs/loginInput\";import*as Yup from\"yup\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChangePassword(_ref){var password=_ref.password,setPassword=_ref.setPassword,conf_password=_ref.conf_password,setConf_password=_ref.setConf_password,error=_ref.error,laoding=_ref.laoding,setLoading=_ref.setLoading,userInfos=_ref.userInfos,setError=_ref.setError;var navigate=useNavigate();var validatePassword=Yup.object({password:Yup.string().required(\"Enter a combination of at least six numbers,letters and punctuation marks(such as ! and &).\").min(6,\"Password must be atleast 6 characters.\").max(36,\"Password can't be more than 36 characters\"),conf_password:Yup.string().required(\"Confirm your password.\").oneOf([Yup.ref(\"password\")],\"Passwords must match.\")});var email=userInfos.email;var changePassword=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.post(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/changePassword\"),{email:email,password:password});case 4:setError(\"\");navigate(\"/\");_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setLoading(false);setError(_context.t0.response.data.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function changePassword(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"reset_form\",style:{height:\"310px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"reset_form_header\",children:\"Change Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reset_form_text\",children:\"Pick a strong password\"}),/*#__PURE__*/_jsx(Formik,{enableReinitialize:true,initialValues:{password:password,conf_password:conf_password},validationSchema:validatePassword,onSubmit:function onSubmit(){changePassword();},children:function children(formik){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(LoginInput,{type:\"password\",name:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"New password\"}),/*#__PURE__*/_jsx(LoginInput,{type:\"password\",name:\"conf_password\",onChange:function onChange(e){return setConf_password(e.target.value);},placeholder:\"Confirm new password\",bottom:true}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error_text\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"reset_form_btns\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"gray_btn\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"blue_btn\",children:\"Continue\"})]})]});}})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/pages/reset/ChangePassword.js"],"names":["Form","Formik","useState","Link","Navigate","useNavigate","LoginInput","Yup","axios","ChangePassword","password","setPassword","conf_password","setConf_password","error","laoding","setLoading","userInfos","setError","navigate","validatePassword","object","string","required","min","max","oneOf","ref","email","changePassword","post","process","env","REACT_APP_BACKEND_URL","response","data","message","height","formik","e","target","value"],"mappings":"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","sourcesContent":["import { Form, Formik } from \"formik\";\r\nimport { useState } from \"react\";\r\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\r\nimport LoginInput from \"../../components/inputs/loginInput\";\r\nimport * as Yup from \"yup\";\r\nimport axios from \"axios\";\r\nexport default function ChangePassword({\r\n  password,\r\n  setPassword,\r\n  conf_password,\r\n  setConf_password,\r\n  error,\r\n  laoding,\r\n  setLoading,\r\n  userInfos,\r\n  setError,\r\n}) {\r\n  const navigate = useNavigate();\r\n  const validatePassword = Yup.object({\r\n    password: Yup.string()\r\n      .required(\r\n        \"Enter a combination of at least six numbers,letters and punctuation marks(such as ! and &).\"\r\n      )\r\n      .min(6, \"Password must be atleast 6 characters.\")\r\n      .max(36, \"Password can't be more than 36 characters\"),\r\n\r\n    conf_password: Yup.string()\r\n      .required(\"Confirm your password.\")\r\n      .oneOf([Yup.ref(\"password\")], \"Passwords must match.\"),\r\n  });\r\n  const { email } = userInfos;\r\n  const changePassword = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.post(`${process.env.REACT_APP_BACKEND_URL}/changePassword`, {\r\n        email,\r\n        password,\r\n      });\r\n      setError(\"\");\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"reset_form\" style={{ height: \"310px\" }}>\r\n      <div className=\"reset_form_header\">Change Password</div>\r\n      <div className=\"reset_form_text\">Pick a strong password</div>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          password,\r\n          conf_password,\r\n        }}\r\n        validationSchema={validatePassword}\r\n        onSubmit={() => {\r\n          changePassword();\r\n        }}\r\n      >\r\n        {(formik) => (\r\n          <Form>\r\n            <LoginInput\r\n              type=\"password\"\r\n              name=\"password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"New password\"\r\n            />\r\n            <LoginInput\r\n              type=\"password\"\r\n              name=\"conf_password\"\r\n              onChange={(e) => setConf_password(e.target.value)}\r\n              placeholder=\"Confirm new password\"\r\n              bottom\r\n            />\r\n            {error && <div className=\"error_text\">{error}</div>}\r\n            <div className=\"reset_form_btns\">\r\n              <Link to=\"/login\" className=\"gray_btn\">\r\n                Cancel\r\n              </Link>\r\n              <button type=\"submit\" className=\"blue_btn\">\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}