{"ast":null,"code":"import _asyncToGenerator from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/node_modules/@babel/runtime/regenerator/index.js\";import{useRef,useState}from\"react\";import MenuItem from\"./MenuItem\";import useOnClickOutside from\"../../helpers/clickOutside\";import{deletePost,savePost}from\"../../functions/post\";import{saveAs}from\"file-saver\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostMenu(_ref){var postUserId=_ref.postUserId,userId=_ref.userId,imagesLength=_ref.imagesLength,setShowMenu=_ref.setShowMenu,token=_ref.token,postId=_ref.postId,checkSaved=_ref.checkSaved,setCheckSaved=_ref.setCheckSaved,images=_ref.images,postRef=_ref.postRef;var _useState=useState(postUserId===userId?true:false),_useState2=_slicedToArray(_useState,2),test=_useState2[0],setTest=_useState2[1];var menu=useRef(null);useOnClickOutside(menu,function(){return setShowMenu(false);});var saveHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:savePost(postId,token);if(checkSaved){setCheckSaved(false);}else{setCheckSaved(true);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function saveHandler(){return _ref2.apply(this,arguments);};}();var downloadImages=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:images.map(function(img){saveAs(img.url,\"image.jpg\");});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function downloadImages(){return _ref3.apply(this,arguments);};}();var deleteHandler=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deletePost(postId,token);case 2:res=_context3.sent;if(res.status===\"ok\"){postRef.current.remove();}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function deleteHandler(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"ul\",{className:\"post_menu\",ref:menu,children:[test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"pin_icon\",title:\"Pin Post\"}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return saveHandler();},children:checkSaved?/*#__PURE__*/_jsx(MenuItem,{icon:\"save_icon\",title:\"Unsave Post\",subtitle:\"Remove this from your saved items.\"}):/*#__PURE__*/_jsx(MenuItem,{icon:\"save_icon\",title:\"Save Post\",subtitle:\"Add this to your saved items.\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"edit_icon\",title:\"Edit Post\"}),!test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"turnOnNotification_icon\",title:\"Turn on notifications for this post\"}),imagesLength&&/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return downloadImages();},children:/*#__PURE__*/_jsx(MenuItem,{icon:\"download_icon\",title:\"Download\"})}),imagesLength&&/*#__PURE__*/_jsx(MenuItem,{icon:\"fullscreen_icon\",title:\"Enter Fullscreen\"}),test&&/*#__PURE__*/_jsx(MenuItem,{img:\"../../../icons/lock.png\",title:\"Edit audience\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"turnOffNotifications_icon\",title:\"Turn off notifications for this post\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"delete_icon\",title:\"Turn off translations\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"date_icon\",title:\"Edit Date\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"refresh_icon\",title:\"Refresh share attachment\"}),test&&/*#__PURE__*/_jsx(MenuItem,{icon:\"archive_icon\",title:\"Move to archive\"}),test&&/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(){return deleteHandler();},children:/*#__PURE__*/_jsx(MenuItem,{icon:\"trash_icon\",title:\"Move to trash\",subtitle:\"items in your trash are deleted after 30 days\"})}),!test&&/*#__PURE__*/_jsx(\"div\",{className:\"line\"}),!test&&/*#__PURE__*/_jsx(MenuItem,{img:\"../../../icons/report.png\",title:\"Report post\",subtitle:\"i'm concerned about this post\"})]});}","map":{"version":3,"sources":["/Users/jasonaviles/Desktop/facebook/starter/frontendssmedia/src/components/post/PostMenu.js"],"names":["useRef","useState","MenuItem","useOnClickOutside","deletePost","savePost","saveAs","PostMenu","postUserId","userId","imagesLength","setShowMenu","token","postId","checkSaved","setCheckSaved","images","postRef","test","setTest","menu","saveHandler","downloadImages","map","img","url","deleteHandler","res","status","current","remove"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\r\nimport MenuItem from \"./MenuItem\";\r\nimport useOnClickOutside from \"../../helpers/clickOutside\";\r\nimport { deletePost, savePost } from \"../../functions/post\";\r\nimport { saveAs } from \"file-saver\";\r\n\r\nexport default function PostMenu({\r\n  postUserId,\r\n  userId,\r\n  imagesLength,\r\n  setShowMenu,\r\n  token,\r\n  postId,\r\n  checkSaved,\r\n  setCheckSaved,\r\n  images,\r\n  postRef,\r\n}) {\r\n  const [test, setTest] = useState(postUserId === userId ? true : false);\r\n  const menu = useRef(null);\r\n  useOnClickOutside(menu, () => setShowMenu(false));\r\n  const saveHandler = async () => {\r\n    savePost(postId, token);\r\n    if (checkSaved) {\r\n      setCheckSaved(false);\r\n    } else {\r\n      setCheckSaved(true);\r\n    }\r\n  };\r\n  const downloadImages = async () => {\r\n    images.map((img) => {\r\n      saveAs(img.url, \"image.jpg\");\r\n    });\r\n  };\r\n  const deleteHandler = async () => {\r\n    const res = await deletePost(postId, token);\r\n    if (res.status === \"ok\") {\r\n      postRef.current.remove();\r\n    }\r\n  };\r\n  return (\r\n    <ul className=\"post_menu\" ref={menu}>\r\n      {test && <MenuItem icon=\"pin_icon\" title=\"Pin Post\" />}\r\n      <div onClick={() => saveHandler()}>\r\n        {checkSaved ? (\r\n          <MenuItem\r\n            icon=\"save_icon\"\r\n            title=\"Unsave Post\"\r\n            subtitle=\"Remove this from your saved items.\"\r\n          />\r\n        ) : (\r\n          <MenuItem\r\n            icon=\"save_icon\"\r\n            title=\"Save Post\"\r\n            subtitle=\"Add this to your saved items.\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"line\"></div>\r\n      {test && <MenuItem icon=\"edit_icon\" title=\"Edit Post\" />}\r\n      {!test && (\r\n        <MenuItem\r\n          icon=\"turnOnNotification_icon\"\r\n          title=\"Turn on notifications for this post\"\r\n        />\r\n      )}\r\n      {imagesLength && (\r\n        <div onClick={() => downloadImages()}>\r\n          <MenuItem icon=\"download_icon\" title=\"Download\" />\r\n        </div>\r\n      )}\r\n      {imagesLength && (\r\n        <MenuItem icon=\"fullscreen_icon\" title=\"Enter Fullscreen\" />\r\n      )}\r\n      {test && <MenuItem img=\"../../../icons/lock.png\" title=\"Edit audience\" />}\r\n      {test && (\r\n        <MenuItem\r\n          icon=\"turnOffNotifications_icon\"\r\n          title=\"Turn off notifications for this post\"\r\n        />\r\n      )}\r\n      {test && <MenuItem icon=\"delete_icon\" title=\"Turn off translations\" />}\r\n      {test && <MenuItem icon=\"date_icon\" title=\"Edit Date\" />}\r\n      {test && (\r\n        <MenuItem icon=\"refresh_icon\" title=\"Refresh share attachment\" />\r\n      )}\r\n      {test && <MenuItem icon=\"archive_icon\" title=\"Move to archive\" />}\r\n      {test && (\r\n        <div onClick={() => deleteHandler()}>\r\n          <MenuItem\r\n            icon=\"trash_icon\"\r\n            title=\"Move to trash\"\r\n            subtitle=\"items in your trash are deleted after 30 days\"\r\n          />\r\n        </div>\r\n      )}\r\n      {!test && <div className=\"line\"></div>}\r\n      {!test && (\r\n        <MenuItem\r\n          img=\"../../../icons/report.png\"\r\n          title=\"Report post\"\r\n          subtitle=\"i'm concerned about this post\"\r\n        />\r\n      )}\r\n    </ul>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}